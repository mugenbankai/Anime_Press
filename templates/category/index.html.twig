{% extends 'base.html.twig' %}

{% block title %}Catégories - Symfony Press
{% endblock %}

{% block body %}
	<div
		class="container">
		<!-- Alertes flash -->
		{% for message in app.flashes('success') %}
			<div class="alert alert-success alert-dismissible fade show" role="alert">
				<i class="fas fa-check-circle"></i>
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			</div>
		{% endfor %}
		{% for message in app.flashes('error') %}
			<div class="alert alert-danger alert-dismissible fade show" role="alert">
				<i class="fas fa-exclamation-circle"></i>
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			</div>
		{% endfor %}

		<div class="d-flex justify-content-between align-items-center mb-4">
			<h1>
				<i class="fas fa-tags"></i>
				Toutes les catégories</h1>
			{% if app.user %}
				<a href="{{ path('app_category_new') }}" class="btn btn-success">
					<i class="fas fa-plus"></i>
					Nouvelle catégorie
				</a>
			{% endif %}
		</div>

		{% if categories is empty %}
			<div class="alert alert-info" role="alert">
				<i class="fas fa-info-circle"></i>
				Aucune catégorie disponible.
			</div>
		{% else %}
			<div class="row g-4">
				{% for category in categories %}
					<div class="col-md-6 col-lg-3">
						<div class="card h-100 shadow-sm hover-card">
							<div class="card-body text-center">
								<div class="mb-3">
									<i class="fas fa-folder fa-3x text-primary"></i>
								</div>
								<h5 class="card-title">{{ category.name }}</h5>
								<p class="text-muted">
									<i class="fas fa-file-alt"></i>
									{{ category.articles|length }}
									article(s)
								</p>
							</div>
							<div class="card-footer bg-transparent border-0 text-center pb-3">
								<div class="d-flex gap-1 justify-content-center">
									<a href="{{ path('app_category_show', {id: category.id}) }}" class="btn btn-sm btn-outline-primary">
										<i class="fas fa-eye"></i>
										Voir
									</a>
									{% if app.user %}
										<a href="{{ path('app_category_edit', {id: category.id}) }}" class="btn btn-sm btn-outline-warning">
											<i class="fas fa-edit"></i>
										</a>
									{% endif %}
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		{% endif %}
	</div>
{% endblock %}
